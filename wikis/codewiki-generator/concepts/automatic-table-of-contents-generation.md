---
title: Automatic table of contents generation
category: concept
sourceFile: add-table-of-contents.js
related: []
created: 2025-11-23
updated: 2025-11-23
---

# Automatic Table of Contents Generation

## Purpose and Overview

The automatic table of contents generation component analyzes markdown files in a wiki and intelligently adds table of contents sections where they would be beneficial. It uses configurable thresholds to determine when content is substantial enough to warrant a TOC, ensuring navigation aids are only added when they provide real value.

## Key Functionality

The component processes all markdown files in a directory structure through several key operations:

- **File Discovery**: Recursively traverses the directory structure to locate all markdown files
- **Content Analysis**: Extracts headings from markdown content and evaluates whether the file meets TOC inclusion criteria
- **Threshold Evaluation**: Applies minimum heading count (`MIN_HEADINGS_FOR_TOC`) and content length (`MIN_CONTENT_LENGTH`) thresholds to determine TOC necessity
- **TOC Generation**: Creates properly formatted and indented table of contents with clean anchor links
- **Safe File Modification**: Preserves existing frontmatter structure while inserting TOC content

The system generates clean anchor links from headings by normalizing text (removing special characters, converting to lowercase, replacing spaces with hyphens) and creates properly nested list structures that reflect the heading hierarchy.

## Relationships

This component operates as a post-processing enhancement within the codewiki-generator ecosystem. It works on markdown files that have already been generated by the main wiki creation process, preserving the existing frontmatter and breadcrumb navigation systems. The component is designed to integrate seamlessly with the established wiki structure without disrupting other navigation or metadata systems.

## Usage Example

```javascript
const { addTableOfContents } = require('./add-table-of-contents');

// Process all markdown files in the wiki directory
addTableOfContents('./wiki');
```

The function processes all discovered markdown files automatically, adding TOCs only to files that meet the configured thresholds. Files with fewer headings or insufficient content length are left unchanged to avoid cluttering simple pages with unnecessary navigation elements.

## Testing

No automated tests found for this component.