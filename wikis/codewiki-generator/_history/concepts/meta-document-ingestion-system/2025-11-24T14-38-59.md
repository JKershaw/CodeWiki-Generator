---
title: Meta-document ingestion system
category: concept
sourceFile: lib/agents/meta-document-ingestion-agent.js
related: [_history/_history/concepts/meta-document-ingestion-system/2025-11-24T14-38-57/2025-11-24T14-38-58.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Meta-document Ingestion System](../_history/_history/concepts/meta-document-ingestion-system/2025-11-24T14-38-57/2025-11-24T14-38-58.md)

## Purpose and Overview

The [Meta-document Ingestion System](../_history/_history/concepts/meta-document-ingestion-system/2025-11-24T14-38-57/2025-11-24T14-38-58.md) transforms root-level markdown files (philosophy documents, specifications, progress reports) into structured wiki pages with intelligent content analysis and cross-referencing capabilities. It serves as a bridge between raw documentation and the organized wiki system, extracting metadata and relationships while preserving document structure through smart truncation strategies.

## Key Functionality

**Document Processing**: The system ingests markdown files and uses LLM-powered analysis to extract structured metadata including categories, themes, and relationships to other wiki content.

**Progressive JSON Repair**: Implements robust parsing of LLM responses with multiple fallback mechanisms to handle malformed JSON, code blocks, and response wrapper text that commonly occur in AI-generated output.

**[Intelligent Content Truncation](../components/intelligent-content-truncation.md)**: When documents exceed token limits, the system preserves context by keeping the first 60% and last 40% of content, maintaining both introduction and conclusion while respecting processing constraints.

**Structured Output Generation**: Creates wiki-ready pages with proper frontmatter, category mapping to the multi-layer wiki system, and cross-reference data for linking related content.

## Relationships

- **Extends agent-based architecture** for document processing workflows
- **Integrates with ClaudeClient** for LLM-powered content analysis and metadata extraction
- **Uses PromptManager** for template-based prompt generation and consistent AI interactions
- **Supports multi-layer wiki system** through category-to-layer mapping functionality
- **Provides foundation** for cross-referencing and relationship detection between wiki pages

## Usage Example

```javascript
const MetaDocumentIngestionAgent = require('./lib/agents/meta-document-ingestion-agent');

const agent = new MetaDocumentIngestionAgent();
const wikiData = await agent.ingestDocument('path/to/document.md');

// Returns structured wiki page data with frontmatter and processed content
console.log(wikiData.frontmatter); // Categories, themes, relationships
console.log(wikiData.content);     // Processed markdown content
```

## Testing

No automated tests found. The component would benefit from test coverage for JSON parsing fallback mechanisms and content truncation logic.