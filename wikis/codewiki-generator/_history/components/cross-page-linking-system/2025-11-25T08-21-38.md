---
title: Cross-page linking system
category: component
sourceFile: lib/processor.js
related: []
created: 2025-11-25
updated: 2025-11-25
---

# Cross-page linking system

## Purpose and Overview

The cross-page linking system is a post-generation component that automatically injects hyperlinks between wiki pages and enriches page metadata with related page information. It establishes a multi-pass documentation generation pattern where content enhancement occurs after initial page creation, creating interconnected documentation networks.

## Key Functionality

The system operates through a coordinated multi-agent workflow that processes generated documentation in two phases:

- **Link Injection**: Uses DocumentationWriterAgent to analyze page content and inject relevant hyperlinks to related pages within the wiki
- **Relationship Discovery**: Leverages LinkDiscoveryAgent to identify semantic relationships between pages and build metadata about page connections
- **Conditional Updates**: Implements efficient page updating that only writes changes when content modifications occur, while simultaneously enriching frontmatter with computed metadata
- **Metadata Enrichment**: Updates page frontmatter with related pages information and global metadata tracking

The processor coordinates these agents in a unified pipeline, ensuring that documentation pages are both internally linked and properly cross-referenced through metadata.

## Relationships

The cross-page linking system integrates with several core components:

- **WikiManager**: Retrieves existing pages, searches for related content, and handles page updates with new links and metadata
- **DocumentationWriterAgent**: Performs the actual link injection into page content
- **LinkDiscoveryAgent**: Discovers semantic relationships between pages for metadata enrichment  
- **StateManager**: Tracks processing state to enable efficient incremental linking updates
- **Repository Processing Pipeline**: Operates as a post-processing step after initial page generation

## Usage Example

```javascript
describe('Processor', () => {
  let processor;
  let mockWikiManager;
  let mockStateManager;
  let mockCodeAnalysisAgent;
  let mockDocWriterAgent;
  let mockTechDebtAgent;
  let mockSecurityAgent;

  beforeEach(() => {
    // Create mock managers and agents
    mockWikiManager = {
      getPage: jest.fn(),
      createPage: jest.fn(),
      updatePage: jest.fn(),
      searchPages: jest.fn(),
      getRelatedPages: jest.fn(),
      updatePageGlobalMetadata: jest.fn()
    };

    mockStateManager = {
      loadState: jest.fn()
    };
    
    // Initialize processor with mocked dependencies
    processor = new Processor({
      wikiManager: mockWikiManager,
      stateManager: mockStateManager,
      codeAnalysisAgent: mockCodeAnalysisAgent,
      docWriterAgent: mockDocWriterAgent
    });
  });
```

## Testing

**Test Coverage**: tests/unit/processor.test.js
- 26 test cases across 6 test suites
- Test categories include: Processor, processCommit, isSignificantFile, getRelevantContext, determinePagePath, processRepository
- Comprehensive mocking of WikiManager, StateManager, and agent dependencies for isolated testing