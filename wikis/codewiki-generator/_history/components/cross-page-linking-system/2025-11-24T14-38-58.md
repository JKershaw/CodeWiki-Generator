---
title: Cross-page linking system
category: component
sourceFile: lib/agents/documentation-writer-agent.js
related: [_history/_history/concepts/cross-page-linking-system/2025-11-24T14-38-57/2025-11-24T14-39-02.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Cross-page Linking System](../_history/_history/concepts/cross-page-linking-system/2025-11-24T14-38-57/2025-11-24T14-39-02.md)

## Purpose and Overview

The [cross-page linking system](../_history/_history/concepts/cross-page-linking-system/2025-11-24T14-38-57/2025-11-24T14-39-02.md) automatically discovers mentions of other wiki pages within documentation content and converts them into markdown hyperlinks. This system enhances documentation interconnectedness by creating intelligent internal links while preserving existing markdown formatting and preventing self-referential links.

## Key Functionality

### Main Components

- **addCrossLinks()** - Orchestrates the complete linking workflow. This function discovers page mentions in content using LinkDiscoveryAgent, validates each mention to prevent duplication and self-references, and replaces valid mentions with markdown link syntax.

- **_createLink()** - Generates properly formatted markdown links while intelligently handling bold-formatted text (e.g., `**text**`), preserving the bold styling within the link.

- **_isAlreadyLinked()** - Validates that a mention is not already embedded within an existing markdown link structure, preventing duplicate link wrapping and markdown corruption.

- **LinkDiscoveryAgent** - A specialized agent (injected as a dependency) responsible for discovering which pages are mentioned in the content. This separation of concerns allows mention discovery logic to evolve independently.

### How It Works

1. LinkDiscoveryAgent analyzes content and identifies all page mentions
2. For each discovered mention, the system checks if it's already part of an existing markdown link
3. Self-references are filtered out (a page doesn't link to itself)
4. Valid mentions are replaced with markdown link syntax: `[mention](../path/to/page)`
5. Bold formatting in titles is preserved within generated links

## Relationships

- **Depends on LinkDiscoveryAgent** - Delegates mention discovery to a specialized agent, maintaining separation of concerns
- **Integrates with content pipeline** - Works as part of the documentation generation workflow, typically after content cleaning
- **Markdown-aware** - Respects existing markdown syntax to prevent corruption of previously formatted links

## Usage Example

```javascript
const DocumentationWriterAgent = require('./lib/agents/documentation-writer-agent');
const LinkDiscoveryAgent = require('./lib/agents/link-discovery-agent');

const writerAgent = new DocumentationWriterAgent({
  linkDiscoveryAgent: new LinkDiscoveryAgent()
});

const contentWithLinks = writerAgent.addCrossLinks(
  'This page discusses the authentication system and user management.',
  {
    allPages: [
      { title: 'authentication system', path: '../security/auth' },
      { title: 'user management', path: '../users/management' }
    ]
  }
);

// Result: Mentions are automatically converted to markdown links
```

## Testing

No automated tests are currently available for this component. When adding tests, verify:

- Mentions are correctly converted to markdown links
- Existing markdown links are not duplicated
- Self-references are excluded
- Bold formatting in titles is preserved within links
- Multiple mentions in a single document are all processed