---
title: Real-time status polling for long-running processes
category: component
sourceFile: public/app.js
related: [_history/_history/components/real-time-status-polling/2025-11-24T14-38-56/2025-11-24T14-38-58.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Real-time Status Polling](../_history/_history/components/real-time-status-polling/2025-11-24T14-38-56/2025-11-24T14-38-58.md) for Long-running Processes

## Purpose and Overview

This component implements automatic status monitoring for long-running repository analysis processes on the client-side dashboard. It periodically queries the backend to detect when asynchronous processing completes, enabling responsive UI updates without requiring manual user intervention or page refreshes.

## Key Functionality

The status polling system works by establishing an automatic refresh interval that runs when processing is active:

- **Polling Mechanism**: Queries the `/api/status` endpoint every 5 seconds to check current processing state
- **Automatic Detection**: Monitors for status changes that indicate processing completion or state transitions
- **Page Reload**: Automatically reloads the page when a status change is detected, ensuring the UI reflects the latest state
- **Event-driven Control**: Integrates with user actions (start, pause, step) that trigger or affect the polling state

The polling runs continuously in the background while processing is active, providing real-time feedback without blocking user interactions. When status changes are detected, the page reloads to display updated results and processing information.

## Relationships

This component is part of the **Phase 4 web dashboard implementation** and integrates with:

- **Backend Endpoints**: 
  - `/process/start` - Initiates repository analysis
  - `/process/pause` - Halts ongoing processing
  - `/process/step` - Advances by one commit
  - `/api/status` - Polled endpoint for current state

- **UI Elements**: Depends on HTML elements with IDs `start-form`, `repoUrl`, `pauseBtn`, `stepBtn`, and `status-badge` for control and display

- **Dashboard Interactions**: Works alongside form submission handlers and button click handlers to provide complete user control over the analysis workflow

## Usage Example

The polling is initialized and managed through event handlers in the dashboard:

```javascript
// Status polling runs automatically every 5 seconds when processing is active
const statusInterval = setInterval(() => {
  fetch('/api/status')
    .then(response => response.json())
    .then(data => {
      if (data.statusChanged) {
        location.reload(); // Reload page when status updates
      }
    })
    .catch(error => console.error('Status poll failed:', error));
}, 5000);

// Polling is triggered by form submission to start processing
document.getElementById('start-form').addEventListener('submit', (e) => {
  e.preventDefault();
  const repoUrl = document.getElementById('repoUrl').value;
  fetch('/process/start', { method: 'POST', body: JSON.stringify({ url: repoUrl }) });
});
```

## Testing

No automated tests are currently available for this component. Testing should verify:

- Polling interval timing and accuracy
- Proper status endpoint communication
- Page reload behavior on status changes
- Polling state management during user interactions
- Error handling for failed status requests