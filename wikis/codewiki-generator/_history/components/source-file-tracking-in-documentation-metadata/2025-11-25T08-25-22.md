---
title: Source file tracking in documentation metadata
category: component
sourceFile: lib/processor.js
related: []
created: 2025-11-25
updated: 2025-11-25
---

# Source File Tracking in Documentation Metadata

## Purpose and Overview

The source file tracking system in `lib/processor.js` creates bidirectional links between source code files and their generated documentation pages. This component enriches documentation metadata with file path information and automatically extracts code examples from test files to provide comprehensive, contextual documentation.

## Key Functionality

- **Source File Metadata**: Tracks the original source file path in documentation parameters, enabling navigation from documentation back to source code
- **Automated Code Example Discovery**: The `extractCodeExamples` method scans for test files using multiple naming conventions (`.test.js`, `.spec.js`, `_test.js`) to find practical usage examples
- **Contextual Documentation Generation**: Passes file paths and extracted code examples to the documentation writer agent, creating more comprehensive and practical documentation output
- **Page Metadata Enhancement**: Updates page metadata with source file information for better traceability and cross-referencing

## Relationships

This component integrates with several core system components:
- **WikiManager**: Updates page metadata with source file tracking information via `updatePageGlobalMetadata`
- **DocWriterAgent**: Receives enriched context including file paths and code examples for enhanced documentation generation
- **StateManager**: Manages the overall processing state while source file information is tracked
- **CodeAnalysisAgent**: Works in conjunction to provide comprehensive code understanding

## Usage Example

```javascript
const Processor = require('./lib/processor');

// Initialize processor with required dependencies
const processor = new Processor({
  wikiManager: mockWikiManager,
  stateManager: mockStateManager,
  codeAnalysisAgent: mockCodeAnalysisAgent,
  docWriterAgent: mockDocWriterAgent,
  techDebtAgent: mockTechDebtAgent,
  securityAgent: mockSecurityAgent
});

// Process a file with source tracking enabled
await processor.processCommit({
  filePath: 'src/components/user-service.js',
  // ... other commit data
});
```

## Testing

**Test Coverage**: `tests/unit/processor.test.js`
- 26 test cases across 6 test suites
- Test categories include: Processor initialization, processCommit functionality, isSignificantFile filtering, getRelevantContext retrieval, determinePagePath logic, and processRepository operations
- Comprehensive mocking of WikiManager, StateManager, and agent dependencies to ensure isolated testing of source file tracking functionality