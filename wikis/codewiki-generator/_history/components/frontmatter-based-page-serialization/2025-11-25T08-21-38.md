---
title: Frontmatter-based page serialization
category: component
sourceFile: lib/wiki-manager.js
related: [meta/overview.md, components/wiki-page-write-operations.md, concepts/automatic-metadata-lifecycle-management.md, guides/safe-file-operation-pattern.md]
created: 2025-11-24
updated: 2025-11-25
---

# Frontmatter-based Page Serialization

## Purpose and Overview

Frontmatter-based Page Serialization implements bidirectional conversion between metadata objects and markdown frontmatter format for wiki pages. The `_serializePage` method complements the existing `_parseFrontmatter` functionality, enabling structured metadata storage while maintaining markdown readability and human-editability.

## Key Functionality

This component handles the serialization of wiki page objects into markdown format with YAML frontmatter:

- **Metadata Serialization**: Converts page metadata objects into YAML frontmatter blocks enclosed by `---` delimiters
- **Content Preservation**: Maintains the original markdown content while updating metadata headers
- **Structured Format**: Produces standardized markdown files that can be parsed by other markdown processors
- **Bidirectional Conversion**: Works alongside `_parseFrontmatter` to enable round-trip serialization without data loss

The serialization process structures pages with frontmatter containing metadata (title, tags, timestamps) followed by the markdown content body.

## Relationships

This component is tightly integrated with other WikiManager components:

- **[Wiki Page Write Operations](../components/wiki-page-write-operations.md)**: Used by create, update, and delete operations to persist pages to disk
- **[Automatic Metadata Lifecycle Management](../concepts/automatic-metadata-lifecycle-management.md)**: Serializes automatically managed timestamps and metadata
- **[Safe File Operation Pattern](../guides/safe-file-operation-pattern.md)**: Works within the defensive file operation framework for robust persistence
- **Frontmatter Parser**: Provides the inverse operation to `_parseFrontmatter` for complete page lifecycle management

## Usage Example

```javascript
const WikiManager = require('./lib/wiki-manager');
const path = require('path');

// Initialize WikiManager with wiki directory
const testDir = path.join(__dirname, '../fixtures/test-wiki');
const wikiManager = new WikiManager(testDir);

// Read a page - demonstrates the parsing side of the serialization
const page = await wikiManager.getPage('test-page.md');

// The page object contains parsed frontmatter and content
expect(page.metadata.title).toBe('Test Page');
expect(page.content).toBeDefined();

// Serialization happens internally during write operations
// creating properly formatted markdown with YAML frontmatter
```

## Testing

**Test Coverage**: `tests/unit/wiki-manager.test.js`

- 17 test cases across 5 test suites
- Comprehensive testing of WikiManager functionality including getPage, getAllPages, searchPages, and getRelatedPages operations
- Tests verify proper frontmatter parsing and page structure handling, ensuring the serialization component maintains data integrity