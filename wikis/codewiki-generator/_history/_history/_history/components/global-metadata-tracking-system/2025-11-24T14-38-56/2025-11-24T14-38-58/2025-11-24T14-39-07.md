---
title: Global metadata tracking system
category: component
sourceFile: lib/wiki-manager.js
related: [concepts/category-based-statistics-aggregation.md]
created: 2025-11-24
updated: 2025-11-24
---

# Global Metadata Tracking System

## Purpose and Overview

The global metadata tracking system provides a centralized mechanism for managing wiki-wide statistics and per-page metadata through a `_metadata.json` file. This system enables the WikiManager to maintain aggregated insights about documentation structure, categories, and processing history beyond what individual page frontmatter can capture, supporting informed documentation management and analysis.

## Key Functionality

The global metadata system operates through four core functions:

- **loadGlobalMetadata()** - Reads and parses `_metadata.json` from the wiki root, automatically returning a default structure if the file doesn't exist, ensuring graceful initialization.

- **saveGlobalMetadata(metadata)** - Persists the global metadata object to `_metadata.json` with formatted JSON output, making changes permanent across sessions.

- **updatePageGlobalMetadata(pagePath, pageMetadata)** - Updates or creates a page entry in global metadata and automatically recalculates category-based statistics. This is the primary entry point for keeping metadata current during wiki operations.

- **getPageGlobalMetadata(pagePath)** - Retrieves metadata for a specific page from the global metadata store, enabling lookup of per-page information.

The system implements **[category-based statistics aggregation](../concepts/category-based-statistics-aggregation.md)**, automatically categorizing pages as concepts, components, or guides while maintaining real-time statistics about wiki composition. This enables tracking of documentation health and organization patterns across the entire wiki.

## Relationships

The global metadata tracking system extends WikiManager's core capabilities by:

- Enabling wiki-wide reporting and analysis features beyond individual page operations
- Integrating seamlessly with the existing page processing workflow to maintain metadata accuracy
- Providing the foundation for tracking page categories (concept, component, guide) and generating distribution statistics
- Supporting queries that require knowledge of the complete documentation structure

## Usage Example

```javascript
const WikiManager = require('./lib/wiki-manager');
const path = require('path');

const wikiManager = new WikiManager('./my-wiki');

// Load existing global metadata
const metadata = wikiManager.loadGlobalMetadata();

// Update metadata for a specific page
const pageMetadata = {
  title: 'My Documentation Page',
  category: 'component',
  lastModified: new Date().toISOString()
};

wikiManager.updatePageGlobalMetadata('my-page.md', pageMetadata);

// Retrieve metadata for a specific page
const pageInfo = wikiManager.getPageGlobalMetadata('my-page.md');
console.log(pageInfo);

// Save updated metadata back to disk
wikiManager.saveGlobalMetadata(metadata);
```

## Testing

The global metadata system is covered by 17 test cases across 5 test suites in `tests/unit/wiki-manager.test.js`. Test coverage includes:

- WikiManager initialization and core operations
- Page retrieval with frontmatter parsing
- Batch page operations via getAllPages
- Search functionality across documented pages
- Related page discovery based on metadata

These tests verify that metadata loading, updating, and retrieval operations function correctly within the WikiManager's workflow.