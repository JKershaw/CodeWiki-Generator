---
title: Wiki Index Generation and Navigation
category: component
sourceFile: lib/processor.js
related: [concepts/multi-agent-documentation-pipeline.md]
created: 2025-11-24
updated: 2025-11-24
---

# Wiki Index Generation and Navigation

## Purpose and Overview

The Wiki Index Generation system automatically creates navigational index pages (`index.md`) from processed documentation, organizing wiki pages by metadata-driven categorization. This component enables readers to discover and navigate related documentation through a structured, auto-generated table of contents. It represents Phase 2 of the [multi-agent documentation pipeline](../concepts/multi-agent-documentation-pipeline.md), adding cross-cutting organizational concerns beyond individual page generation.

## Key Functionality

The wiki index generation operates through two main components:

**WikiIndexAgent** - A specialized agent responsible for:
- Collecting all processed wiki pages through the wikiManager
- Extracting and organizing metadata (titles, categories) from each page
- Generating categorized navigation structures
- Creating human-readable index content with logical groupings

**generateWikiIndex()** - An orchestration function that:
- Retrieves all wiki pages from the documentation system
- Prepares structured data with complete page metadata
- Invokes WikiIndexAgent to generate index content
- Writes the final `index.md` file to the wiki output directory
- Respects cost control boundaries (skips generation if processing stopped due to cost limits)
- Fails gracefully without interrupting the main documentation pipeline

The index generation executes conditionally after successful processing completion but before final cost summary calculation. This positioning ensures that index generation only occurs when meaningful documentation exists and cost constraints have been satisfied.

## Relationships

WikiIndexAgent integrates into the existing multi-agent pipeline alongside:
- **CodeAnalysisAgent** - Performs initial code analysis
- **DocumentationWriterAgent** - Generates individual documentation pages
- **MetaAnalysisAgent** - Extracts and enriches metadata

The component depends on `wikiManager.getAllPages()` to retrieve processed documentation and respects the state management system to determine whether cost limits have been reached. Index generation is skipped if processing stopped due to cost constraints, maintaining consistency with overall system resource allocation.

## Usage Example

```javascript
const processor = new Processor(wikiManager, stateManager);

// After main processing pipeline completes successfully
await processor.process(repository, codebaseConfig);

// Index generation is automatically invoked if:
// - Processing completed successfully
// - Cost limits were not exceeded
// - Wiki pages were generated

// The resulting index.md organizes all pages with:
// - Categorized sections based on page metadata
// - Navigation links to related documentation
// - Hierarchical structure derived from page titles and categories
```

## Testing

Test coverage is available in `tests/unit/processor.test.js` with 26 test cases across 6 test suites. Test categories include:
- Processor initialization and lifecycle
- Processing execution flows
- File significance determination
- Context retrieval and organization
- Page path determination
- Repository processing workflows

The test suite validates that index generation integrates properly with the broader documentation pipeline, including cost-aware conditional execution and graceful error handling patterns.