---
title: Multi-layer Wiki Architecture
category: concept
sourceFile: lib/wiki-researcher.js
related: [_history/_history/_history/concepts/context-aware-research-system/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md]
created: 2025-11-24
updated: 2025-11-24
---

# Multi-layer Wiki Architecture

## Purpose and Overview

The Multi-layer Wiki Architecture provides intelligent context retrieval from structured documentation organized across distinct functional layers (meta, concepts, components, guides, history, quality). This system enables AI agents and developers to gather relevant documentation dynamically based on task requirements, with specialized optimization for different types of work including features, bugs, architectural changes, and onboarding.

## Key Functionality

The `WikiResearcher` class implements a [context-aware research system](../_history/_history/_history/concepts/context-aware-research-system/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md) that:

- **Extracts keywords** from task descriptions to guide documentation searches
- **Searches across layers** using configurable priorities based on task type
- **Ranks results by relevance** through keyword matching in titles, paths, and metadata  
- **Assembles task-specific context packages** with depth limits and layer preferences
- **Formats structured reports** in human-readable markdown for consumption by AI agents

The system supports four optimized task types:
- **Feature development** - prioritizes concepts and components
- **Bug fixing** - emphasizes history and quality documentation  
- **Architectural changes** - focuses on high-level concepts and meta information
- **Onboarding** - provides comprehensive coverage across all layers

Layer mapping includes:
- `meta/` - Project-level documentation and overviews
- `concepts/`, `components/`, `guides/` - Code-related documentation
- `history/` - Change logs and evolution tracking
- `quality/` - Testing, standards, and quality metrics

## Relationships

- **Depends on WikiManager** for accessing wiki pages and metadata across the layer structure
- **Integrates with ClaudeClient** for potential AI-enhanced relevance ranking
- **Produces structured context** consumed by AI agents for informed decision making
- **Complements existing wiki management** by adding an intelligent retrieval layer on top of static documentation

## Usage Example

```javascript
const WikiResearcher = require('./lib/wiki-researcher');

const researcher = new WikiResearcher(wikiManager);

// General context gathering
const context = await researcher.gatherContext(
  "Add user authentication to the login system",
  { maxDepth: 5, layers: ['concepts', 'components'] }
);

// Task-type optimized context
const bugContext = await researcher.getContextForTaskType(
  "Fix memory leak in data processing", 
  'bug'
);

const report = researcher.formatContextReport(context);
```

## Testing

No automated tests found. Test coverage should be implemented to verify keyword extraction, relevance scoring algorithms, and layer-specific search functionality.