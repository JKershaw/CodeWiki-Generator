---
title: Cross-page linking system
category: concept
sourceFile: lib/processor.js
related: [components/cross-page-linking-system.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Cross-page Linking System](../components/cross-page-linking-system.md)

## Purpose and Overview

The [cross-page linking system](../components/cross-page-linking-system.md) automatically discovers semantic relationships between documentation pages and injects navigation links to improve discoverability. Operating as a post-generation pass after initial page creation, it transforms isolated documentation into an interconnected knowledge graph that helps users navigate related topics.

## Key Functionality

The [cross-page linking system](../components/cross-page-linking-system.md) implements a two-phase generation pattern:

1. **Independent Page Generation**: All documentation pages are generated in isolation without awareness of relationships
2. **Relationship Discovery and Injection**: After generation completes, a separate pass analyzes page content to identify related pages and updates metadata

### Core Components

**`addCrossLinksToAllPages()`**
- Orchestrates the entire cross-linking workflow
- Iterates through all generated pages via `wikiManager.getAllPages()`
- Invokes `LinkDiscoveryAgent.findRelatedPages()` to analyze each page's content
- Updates page metadata with a `related` field containing discovered relationships
- Injects hyperlinks into page content using `documentationWriterAgent.addCrossLinks()`
- Persists updated pages back to the wiki manager

**`LinkDiscoveryAgent`**
- Analyzes page content to identify semantically related pages
- Generates relationship metadata and relevance scoring
- Supports customization of discovery heuristics and filtering criteria

## Relationships

- **Execution Order**: `addCrossLinksToAllPages()` executes after `generateWikiIndex()` in the main documentation generation flow
- **Page I/O**: Depends on `wikiManager.getAllPages()` for reading and `wikiManager.writePage()` for persisting updated pages
- **Link Injection**: Leverages `documentationWriterAgent.addCrossLinks()` to embed hyperlinks into page content
- **Relationship Discovery**: Uses `LinkDiscoveryAgent.findRelatedPages()` as the primary mechanism for identifying page associations
- **Metadata Updates**: Populates the `related` field in page metadata with LinkDiscoveryAgent results

## Usage Example

```javascript
const processor = new Processor(wikiManager, stateManager, codeAnalysisAgent, docWriterAgent);

// After initial page generation completes
await processor.generateWikiIndex(repositoryPath, outputPath);

// Apply cross-page linking as a separate pass
await processor.addCrossLinksToAllPages();

// Pages now contain:
// - Updated metadata with 'related' field listing connected pages
// - Injected hyperlinks to semantically related content
```

## Testing

Test coverage is available in `tests/unit/processor.test.js` with 26 test cases across 6 test suites. Mock implementations demonstrate the expected interfaces:

- `wikiManager` provides `getAllPages()`, `writePage()`, and metadata update operations
- `LinkDiscoveryAgent` supplies the `findRelatedPages()` method for relationship analysis
- `documentationWriterAgent` handles `addCrossLinks()` for inline hyperlink injection

The test suite validates orchestration logic, page iteration, metadata updates, and integration between discovery and injection components.