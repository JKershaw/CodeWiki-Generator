---
title: Local Git Integration Testing
category: concept
sourceFile: test-run-local.js
related: [_history/_history/_history/concepts/local-git-integration-testing/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Local Git Integration Testing](../_history/_history/_history/concepts/local-git-integration-testing/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md)

## Purpose and Overview

`test-run-local.js` provides a self-contained testing pattern that runs the CodeWiki Processor against your own repository's git history rather than external repositories. This enables validation of the processor on real-world commit data without external API dependencies, rate limits, or network callsâ€”making it ideal for development, debugging, and pre-deployment verification.

## Key Functionality

### [Git History Extraction](../components/git-history-extraction.md)

The `getLocalCommits()` function extracts detailed commit metadata from your local repository:

- **Commit SHAs and messages** - Retrieves the full commit history
- **File changes** - Identifies added, modified, and deleted files per commit
- **Patch data** - Extracts the actual diffs for each file change
- **Edge case handling** - Correctly processes first commits and handles deleted files

This extracted data is formatted into commit objects compatible with the Processor's expected input format.

### [Mock GitHub Client Pattern](../components/mock-git-hub-client-pattern.md)

Rather than calling the GitHub API, the test injects a mock client that returns locally-sourced commit data. This decouples the Processor from external dependencies while maintaining the same interface, allowing you to test the complete workflow in isolation.

### Test Orchestration

The `main()` function coordinates the test run:

1. Initializes the Processor with configuration
2. Injects the mock GitHub client with local commits
3. Executes the processing pipeline
4. Displays results and processing statistics

Output is written to `generated-wiki/` to keep test artifacts separate from the `dev-wiki/` directory.

## Relationships

- **Depends on**: Processor class for core processing logic
- **Replaces**: GitHub API client with local commit data
- **Used for**: Integration testing and validation workflows
- **Outputs to**: `generated-wiki/` directory (separate from development artifacts)

## Usage Example

```javascript
const Processor = require('./path/to/processor');
const { getLocalCommits, main } = require('./test-run-local');

// Run the test directly
// This extracts commits from your local repo and processes them
node test-run-local.js
```

The script executes as a standalone process:
- Fetches your repository's recent commits using `getLocalCommits()`
- Creates a Processor instance with a mock GitHub client
- Processes commits and generates wiki documentation in `generated-wiki/`
- Logs processing statistics and results to console

## Testing

No automated test suite exists for this module. Testing is performed manually by:

1. Running the script against your codebase
2. Verifying output in the `generated-wiki/` directory
3. Inspecting console logs for processing statistics and errors
4. Validating that commit data extraction and processor integration work correctly

When developing changes to the Processor, use this script to validate behavior against real commit history before testing against external repositories.