---
title: Context-aware Documentation Querying
category: concept
sourceFile: mcp-server.js
related: [_history/_history/_history/concepts/context-aware-documentation-querying/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Context-aware Documentation Querying](../_history/_history/_history/concepts/context-aware-documentation-querying/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md)

## Purpose and Overview

The [Context-aware Documentation Querying](../_history/_history/_history/concepts/context-aware-documentation-querying/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md) system provides an MCP (Model Context Protocol) server that enables AI tools like Claude Code to intelligently search and retrieve documentation from the project wiki. It implements JSON-RPC 2.0 over stdio to facilitate seamless integration with AI development workflows, allowing tools to gather contextual documentation based on specific tasks and queries.

## Key Functionality

The system centers around the `MCPServer` class which handles JSON-RPC communication and routes requests to specialized handlers:

- **Intelligent Wiki Search**: Uses WikiResearcher to perform context-aware searches with [task-type optimization](../_history/_history/concepts/task-type-optimization/2025-11-24T14-38-57/2025-11-24T14-38-58.md) and relevance scoring
- **[Documentation Request Tracking](../components/documentation-request-tracking.md)**: Captures and prioritizes requests for missing documentation to identify gaps in the knowledge base
- **Structured Response Formatting**: Transforms search results into structured formats optimized for AI tool consumption
- **Real-time Communication**: Maintains persistent stdio connection for efficient query processing

The server processes incoming requests through `handleRequest`, which routes to either `queryWiki` for documentation searches or `requestDocumentation` for tracking missing content. Search results are processed by `formatWikiResponse` to ensure consistent, AI-friendly output formatting.

## Relationships

The MCP server integrates deeply with the existing documentation ecosystem:

- **WikiResearcher Integration**: Leverages the wiki search engine for intelligent context gathering and relevance scoring
- **Wiki Management System**: Extends the core documentation workflow by providing programmatic access for AI tools
- **Metrics and Quality Systems**: Connects to tracking systems to monitor documentation usage patterns and identify improvement opportunities
- **Claude Code Integration**: Serves as the primary bridge between AI development tools and the project's knowledge base

## Usage Example

```javascript
const MCPServer = require('./mcp-server');

// Initialize the MCP server for Claude Code integration
const server = new MCPServer();

// Handle incoming JSON-RPC requests from AI tools
server.handleRequest({
  method: 'queryWiki',
  params: { query: 'authentication patterns', taskType: 'implementation' }
});

// Track requests for missing documentation
server.requestDocumentation({
  topic: 'API rate limiting',
  priority: 'high',
  context: 'development workflow'
});
```

## Testing

No automated tests are currently available for this component. Testing should focus on JSON-RPC protocol compliance, wiki integration accuracy, and response formatting consistency.