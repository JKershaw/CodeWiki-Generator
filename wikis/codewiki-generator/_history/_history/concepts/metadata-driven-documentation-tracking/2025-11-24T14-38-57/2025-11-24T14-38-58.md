---
title: Metadata-driven documentation tracking
category: concept
sourceFile: lib/processor.js
related: [_history/_history/_history/concepts/metadata-driven-documentation-tracking/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md]
created: 2025-11-24
updated: 2025-11-24
---

# [Metadata-driven Documentation Tracking](../_history/_history/_history/concepts/metadata-driven-documentation-tracking/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md)

## Purpose and Overview

The [metadata-driven documentation tracking](../_history/_history/_history/concepts/metadata-driven-documentation-tracking/2025-11-24T14-38-57/2025-11-24T14-38-58/2025-11-24T14-39-02.md) system maintains centralized metadata for all wiki pages, enabling future link tracking, categorization queries, and documentation discoverability. This shifts the codebase from isolated page management to interconnected documentation state, laying the foundation for graph-based analysis of page relationships and dependencies.

## Key Functionality

### Metadata Synchronization

The system implements **[dual-path metadata synchronization](../components/dual-path-metadata-synchronization.md)** to ensure consistent metadata across the page lifecycle:

- **Page Creation**: Captures the creation timestamp alongside core metadata (title, category)
- **Page Updates**: Refreshes metadata while preserving the original creation timestamp
- **Centralized Updates**: Both workflows converge on `updatePageGlobalMetadata()` function

### Metadata Schema

Each page maintains the following metadata structure:

- `title` - Page title
- `category` - Documentation category for organization
- `created` - Creation timestamp (set only on new pages)
- `incomingLinks` - Array placeholder for backlink tracking (future enhancement)
- `outgoingLinks` - Array placeholder for forward link tracking (future enhancement)

The reserved link tracking fields enable future enhancements without requiring schema migrations.

## Relationships

The Processor class integrates with the following components:

- **WikiManager**: Provides persistent metadata storage via `updatePageGlobalMetadata()` method
- **Page Lifecycle**: Both create and update operations trigger metadata synchronization
- **Future Graph Analysis**: Link tracking fields are reserved for document relationship queries and dependency analysis

## Usage Example

```javascript
const Processor = require('./lib/processor');
const processor = new Processor(mockWikiManager, mockStateManager, mockCodeAnalysisAgent, mockDocWriterAgent);

// Metadata is automatically updated during page operations
// On page creation:
await processor.createPage(pagePath, pageContent, { title: 'My Doc', category: 'API' });

// On page update:
await processor.updatePage(pagePath, updatedContent, { title: 'My Doc', category: 'API' });

// WikiManager's updatePageGlobalMetadata is called automatically with:
// { pagePath, title, category, created?, incomingLinks: [], outgoingLinks: [] }
```

## Testing

**Test Coverage**: 26 test cases across 6 test suites in `tests/unit/processor.test.js`

Test categories include:
- Processor initialization and core functionality
- Commit processing with metadata updates
- File significance detection
- Context retrieval for documentation
- Page path determination
- Repository-level processing

The test suite includes mocking of `updatePageGlobalMetadata` to verify metadata is correctly synchronized across page creation and update workflows.